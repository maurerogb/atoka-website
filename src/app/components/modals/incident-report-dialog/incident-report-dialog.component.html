<!-- <div class="">
  <p class="text-left font-semibold">Priority</p>
  <div class="border border-[#E6E6E6] rounded-lg p-4 w-full">
    <mat-select [placeholder]="'Select Options'" class="w-full">
      <mat-option [value]="'Urgent'"> Urgent</mat-option>
      <mat-option [value]="'Not Urgent'"> Not Urgent</mat-option>
    </mat-select>
  </div>
</div> -->

<div mat-dialog-content class="items-center">
  <div class="w-[600px] h-full justify-center mt-5 text-center">
    <div class="cursor-pointer flex justify-end" (click)="close()">
      <img src="assets/svg/cancel.svg" alt="" />
    </div>
    <div
      class="flex flex-col text-[#005677] h-[100px] gap-6 my-6 w-full items-center"
    >
      <p class="font-bold text-center text-xl">Report Incident</p>
      <p class="text-base text-center max-w-[300px]">
        Have any complain about any location! Please report incident here.
      </p>
    </div>

    <div class="text-left" [formGroup]="reportForm">
      <form class="mb-6">
        <p
          class="text-sm text-center font-light text-red-500 mb-2"
          *ngIf="message"
        >
          {{ message }}
        </p>

        <div class="grid gap-x-4 mt-4">
          <app-atoka-search
            [labelName]="'Location'"
            [addressCode]="addressCode"
            (returnCode)="setAddressCode($event)"
          ></app-atoka-search>
          <div class="mt-3 mb-3 text-center">
            <a href="javascript:void(0)" class="primary" (click)="showForm()">
              Don't have ATOKA ? <b> Enter address manually</b>
            </a>
          </div>
          <app-address-form
            [hideForm]="hideForm"
            (showFormState)="setHideForm($event)"
            (formMessage)="message = $event"
          >
          </app-address-form>
        </div>

        <div class="grid grid-cols-1 gap-x-4">
          <div class="control">
            <mat-label class="text-sm">Title*</mat-label>
            <mat-form-field
              class="w-full rounded-xl"
              appearance="fill"
              floatLabel="always"
            >
              <mat-select
                placeholder="Select incident title"
                formControlName="incidentTypeId"
              >
                @for (item of incidentTypes; track $index) {
                <mat-option [value]="item.incidentTypeId">{{ item.typeName }}</mat-option>
                }
              </mat-select>
              <mat-error
                *ngIf="
                  reportForm.get('incidentTypeId')?.hasError('required') &&
                  (reportForm.get('incidentTypeId')?.dirty ||
                    reportForm.get('incidentTypeId')?.touched)
                "
              >
                Title is required
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="grid gap-x-4">
          <div class="control">
            <mat-label class="text-sm">Incident Details*</mat-label>
            <mat-form-field
              class="w-full rounded-xl"
              appearance="fill"
              floatLabel="always"
            >
              <textarea
                matInput
                rows="4"
                formControlName="incidentDetails"
                placeholder="Give detailed information about the incident"
              ></textarea>
              <mat-error
                *ngIf="
                  reportForm
                    .get('incidentDetails')
                    ?.hasError('required') &&
                  (reportForm.get('incidentDetails')?.dirty ||
                    reportForm.get('incidentDetails')?.touched)
                "
              >
                Incident details are required
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="grid grid-cols-1 gap-x-4">
          <div class="control">
            <mat-label class="text-sm">Resolution*</mat-label>
            <mat-form-field
              class="w-full rounded-xl"
              appearance="fill"
              floatLabel="always"
            >
              <mat-select
                placeholder="Please select resolution team"
                formControlName="resolution"
              >
                @for (item of resolutionOptions; track item) {
                <mat-option [value]="item">{{ item }}</mat-option>
                }
              </mat-select>
              <mat-error
                *ngIf="
                  reportForm.get('resolution')?.hasError('required') &&
                  (reportForm.get('resolution')?.dirty ||
                    reportForm.get('resolution')?.touched)
                "
              >
                Resolution is required
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="grid grid-cols-1 gap-x-4">
          <div class="control">
            <mat-label class="text-sm"
              >Attach Picture (optional)</mat-label
            >
            <app-upload-file
              [fileType]="'file'"
              (uploadedFile)="setPhoto($event)"
            ></app-upload-file>
          </div>
        </div>

        <div class="flex justify-center mt-8">
          <button
              type="button"
              mat-flat-button
              color="primary"
              class="w-full"
              (click)="sendReport()"
              [disabled]="!canSave"
            >
              Send Report
            </button>
        </div>
      </form>
    </div>
  </div>

  <app-loader *ngIf="loadingService.isLoading$ | async"></app-loader>
</div>

